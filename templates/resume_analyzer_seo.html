{% extends "base.html" %}

{% block title %}AI Resume Analyzer ‚Äì Free ATS Score & JD Match | AIGPT{% endblock %}
{% block meta_description %}Analyze your resume with AI. Get ATS score, rewrite, JD match, and improvements instantly. Free resume checker with grammar fixes, skill gap analysis, and keyword optimization.{% endblock %}
{% block meta_keywords %}resume analyzer, ATS score, resume checker, JD match, resume optimization, ATS resume checker, free resume analyzer, resume AI{% endblock %}

{% block og_title %}AI Resume Analyzer ‚Äì Free ATS Score & JD Match | AIGPT{% endblock %}
{% block og_description %}Analyze your resume with AI. Get ATS score, rewrite, JD match, and improvements instantly.{% endblock %}

{% block content %}
<div class="main-content-wrapper">
  <div class="tool-header">
    <h1 class="tool-title">üìÑ Resume Analyzer AI</h1>
    <p class="tool-subtitle">Get ATS score, match with job descriptions, and get AI-powered improvements.</p>
  </div>

  <button onclick="tryDemo()" class="demo-btn-large">‚ú® Try Example Resume</button>

  <div class="upload-card">
    <h3 class="upload-header">Upload Your Resume</h3>
    <form id="resumeUploadForm" enctype="multipart/form-data">
      <label class="upload-label">Select Resume (PDF):</label>
      <input type="file" id="resumeFile" accept=".pdf" class="file-input" />
      <button type="submit" class="upload-btn">Upload Resume</button>
    </form>
  </div>

  <div class="upload-card" style="margin-top: 2rem;">
    <h3 class="upload-header">Upload Job Description (Optional)</h3>
    <form id="jdUploadForm" enctype="multipart/form-data">
      <label class="upload-label">Select Job Description (PDF):</label>
      <input type="file" id="jdFile" accept=".pdf" class="file-input" />
      <button type="submit" class="upload-btn">Upload JD</button>
    </form>
  </div>

  <div id="status" class="status-message"></div>

  <div class="workflow-actions" id="actions" style="display: none;">
    <button onclick="getATSScore()" class="workflow-btn">Get ATS Score</button>
    <button onclick="matchWithJD()" class="workflow-btn">Match with JD</button>
    <button onclick="getFullReport()" class="workflow-btn">Full Report</button>
    <button onclick="rewriteResume()" class="workflow-btn">Rewrite Resume</button>
    <button onclick="shareResult()" class="workflow-btn share">Share Result</button>
    <button onclick="copyResult()" class="workflow-btn copy">Copy Result</button>
  </div>

  <div id="results" class="results-section"></div>
  <div id="demoResults" class="results-section"></div>
</div>

<div class="seo-page-container" style="margin-top: 4rem;">
  <div class="seo-header">
    <h1>AI Resume Analyzer ‚Äì Free ATS Score & JD Match</h1>
    <p class="seo-subtitle">Get instant AI-powered resume analysis with ATS scoring, grammar fixes, skill gap analysis, and JD matching. No login required.</p>
  </div>

  <!-- How It Works -->
  <section class="seo-section-modern">
    <div class="seo-section-header">
      <h2>üöÄ How It Works</h2>
      <p class="seo-section-subtitle">Get professional resume analysis in 4 simple steps</p>
    </div>
    <div class="steps-grid-modern">
      <div class="step-card-modern">
        <div class="step-icon">üì§</div>
        <div class="step-number-modern">1</div>
        <h3>Upload Your Resume</h3>
        <p>Upload your resume PDF. Our AI instantly processes it with advanced document parsing.</p>
      </div>
      <div class="step-card-modern">
        <div class="step-icon">üìä</div>
        <div class="step-number-modern">2</div>
        <h3>Get ATS Score</h3>
        <p>Receive a comprehensive 0-100 ATS compatibility score with detailed breakdown across 5 key dimensions.</p>
      </div>
      <div class="step-card-modern">
        <div class="step-icon">üéØ</div>
        <div class="step-number-modern">3</div>
        <h3>Match with JD</h3>
        <p>Upload a job description to see how well your resume matches with specific skill gaps and recommendations.</p>
      </div>
      <div class="step-card-modern">
        <div class="step-icon">‚ú®</div>
        <div class="step-number-modern">4</div>
        <h3>Get Improvements</h3>
        <p>Receive AI-powered suggestions and a professionally rewritten resume optimized for ATS systems.</p>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="seo-section-modern">
    <div class="seo-section-header">
      <h2>üíé Key Features</h2>
      <p class="seo-section-subtitle">Comprehensive resume analysis powered by advanced AI</p>
    </div>
    <div class="features-grid-modern">
      <div class="feature-card-modern">
        <div class="feature-icon">üìà</div>
        <h3>ATS Score (0-100)</h3>
        <p>Comprehensive ATS compatibility scoring with detailed breakdown across keywords, format, skills, experience, and education.</p>
      </div>
      <div class="feature-card-modern">
        <div class="feature-icon">‚úçÔ∏è</div>
        <h3>Grammar & Clarity Fixes</h3>
        <p>Identify and fix writing issues, improve clarity, and enhance professional tone throughout your resume.</p>
      </div>
      <div class="feature-card-modern">
        <div class="feature-icon">üéØ</div>
        <h3>Bullet Point Improvements</h3>
        <p>Enhance bullet points with action verbs, quantifiable achievements, and impact-focused descriptions.</p>
      </div>
      <div class="feature-card-modern">
        <div class="feature-icon">üîç</div>
        <h3>Skill Gap Analysis</h3>
        <p>Compare your skills with job requirements and identify missing skills that could improve your match score.</p>
      </div>
      <div class="feature-card-modern">
        <div class="feature-icon">üîë</div>
        <h3>Keyword Optimization</h3>
        <p>Optimize keywords for ATS systems while maintaining natural, readable content that appeals to human recruiters.</p>
      </div>
      <div class="feature-card-modern">
        <div class="feature-icon">üìã</div>
        <h3>JD Match Score</h3>
        <p>See how well your resume matches job descriptions with percentage scores and detailed gap analysis.</p>
      </div>
      <div class="feature-card-modern">
        <div class="feature-icon">üìù</div>
        <h3>Rewritten Resume</h3>
        <p>Get a professionally improved version of your resume that incorporates all AI recommendations and optimizations.</p>
      </div>
      <div class="feature-card-modern">
        <div class="feature-icon">üì§</div>
        <h3>Shareable Results</h3>
        <p>Export and share your analysis results as JSON, PDF, or via shareable links for easy collaboration.</p>
      </div>
    </div>
  </section>

  <!-- SEO Content -->
  <section class="seo-section-modern">
    <div class="seo-content-card">
      <div class="seo-section-header">
        <h2>üéØ Why Use Our AI Resume Analyzer?</h2>
        <p class="seo-section-subtitle">Professional resume optimization powered by advanced AI technology</p>
      </div>
      <div class="seo-content-body">
        <p class="seo-intro">Our AI Resume Analyzer helps job seekers optimize their resumes for Applicant Tracking Systems (ATS). With over <strong>98% of Fortune 500 companies</strong> using ATS software, having an ATS-optimized resume is crucial for getting noticed by recruiters and landing interviews.</p>
        
        <div class="analysis-dimensions">
          <h3>üìä Comprehensive Analysis Across Multiple Dimensions</h3>
          <div class="dimensions-grid">
            <div class="dimension-card">
              <div class="dimension-icon">üîë</div>
              <h4>Keyword Matching</h4>
              <p>Ensures your resume contains relevant keywords from job descriptions, improving ATS parsing and ranking.</p>
            </div>
            <div class="dimension-card">
              <div class="dimension-icon">üìÑ</div>
              <h4>Format Compatibility</h4>
              <p>Checks if your resume format is ATS-friendly, identifying potential parsing issues before submission.</p>
            </div>
            <div class="dimension-card">
              <div class="dimension-icon">üõ†Ô∏è</div>
              <h4>Skills Alignment</h4>
              <p>Verifies your skills match job requirements and identifies gaps that could be addressed.</p>
            </div>
            <div class="dimension-card">
              <div class="dimension-icon">üíº</div>
              <h4>Experience Relevance</h4>
              <p>Evaluates how well your work experience aligns with the role and suggests improvements.</p>
            </div>
            <div class="dimension-card">
              <div class="dimension-icon">üéì</div>
              <h4>Education Match</h4>
              <p>Checks educational requirements alignment and suggests how to highlight relevant qualifications.</p>
            </div>
          </div>
        </div>

        <div class="seo-benefits">
          <h3>‚ú® What Makes Us Different</h3>
          <p>Unlike generic resume checkers, our AI provides <strong>actionable insights and specific recommendations</strong>. You'll get a detailed breakdown of strengths and weaknesses, along with a professionally rewritten resume that incorporates all improvements. Our analysis is based on real-world ATS systems used by top companies, ensuring your resume passes automated screening.</p>
        </div>
      </div>
    </div>
  </section>


  <!-- FAQ -->
  <section class="seo-section-modern">
    <div class="seo-section-header">
      <h2>‚ùì Frequently Asked Questions</h2>
      <p class="seo-section-subtitle">Everything you need to know about our AI Resume Analyzer</p>
    </div>
    <div class="faq-grid-modern">
      <div class="faq-card-modern">
        <div class="faq-icon">üìä</div>
        <h3>What is an ATS score?</h3>
        <p>An ATS (Applicant Tracking System) score measures how compatible your resume is with automated hiring systems. Scores range from 0-100, with higher scores indicating better ATS compatibility and higher chances of passing automated screening.</p>
      </div>
      <div class="faq-card-modern">
        <div class="faq-icon">üîí</div>
        <h3>Is my resume data secure?</h3>
        <p>Yes, we process your resume securely and don't store personal information. All analysis is done in real-time, and your data is never shared with third parties or used for training purposes.</p>
      </div>
      <div class="faq-card-modern">
        <div class="faq-icon">üöÄ</div>
        <h3>Do I need to create an account?</h3>
        <p>No, our resume analyzer is completely free and requires no login or account creation. Simply upload your resume and get instant analysis results.</p>
      </div>
      <div class="faq-card-modern">
        <div class="faq-icon">üéØ</div>
        <h3>Can I match my resume with a job description?</h3>
        <p>Yes, upload both your resume and the job description to get a detailed match analysis showing strengths, gaps, and specific improvement suggestions tailored to that role.</p>
      </div>
      <div class="faq-card-modern">
        <div class="faq-icon">üìÑ</div>
        <h3>What file formats are supported?</h3>
        <p>Currently, we support PDF format for resume uploads. PDF ensures the best compatibility with our AI analysis engine and maintains formatting integrity.</p>
      </div>
      <div class="faq-card-modern">
        <div class="faq-icon">‚úÖ</div>
        <h3>How accurate is the ATS score?</h3>
        <p>Our AI uses advanced language models trained on thousands of resumes to provide accurate ATS scoring. The score reflects real-world ATS compatibility based on how major ATS systems parse and rank resumes.</p>
      </div>
      <div class="faq-card-modern">
        <div class="faq-icon">üì§</div>
        <h3>Can I export my results?</h3>
        <p>Yes, you can export results as JSON, PDF, or share them via a public link. All analysis results are available for download and sharing.</p>
      </div>
    </div>
  </section>

</div>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "AI Resume Analyzer",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "1250"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [{
    "@type": "Question",
    "name": "What is an ATS score?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "An ATS (Applicant Tracking System) score measures how compatible your resume is with automated hiring systems. Scores range from 0-100, with higher scores indicating better ATS compatibility."
    }
  }, {
    "@type": "Question",
    "name": "Is my resume data secure?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "Yes, we process your resume securely and don't store personal information. All analysis is done in real-time."
    }
  }]
}
</script>

<script>
async function tryDemo() {
  document.getElementById("demoResults").innerHTML = '<div class="loading">‚è≥ Loading example resume...</div>';
  try {
    const res = await fetch("/api/demo/resume");
    
    if (!res.ok) {
      const errorData = await res.json().catch(() => ({ error: `HTTP ${res.status}: ${res.statusText}` }));
      document.getElementById("demoResults").innerHTML = '<div class="error-message">‚ùå ' + (errorData.error || `Server error: ${res.status}`) + '</div>';
      return;
    }
    
    const data = await res.json();
    
    if (data.error) {
      document.getElementById("demoResults").innerHTML = '<div class="error-message">‚ùå ' + data.error + '</div>';
    } else {
      document.getElementById("demoResults").innerHTML = `<div class="result-card"><pre class="result-json">${JSON.stringify(data, null, 2)}</pre></div>`;
    }
  } catch (error) {
    document.getElementById("demoResults").innerHTML = '<div class="error-message">‚ùå Error: ' + error.message + '</div>';
  }
}

document.getElementById("resumeUploadForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const file = document.getElementById("resumeFile").files[0];
  if (!file) {
    document.getElementById("status").innerHTML = '<div class="error-message">Please select a resume file</div>';
    return;
  }
  
  const formData = new FormData();
  formData.append("file", file);
  formData.append("file_id", "active");
  
  document.getElementById("status").innerHTML = '<div class="loading">‚è≥ Uploading and processing resume...</div>';
  
  try {
    const res = await fetch("/api/upload-multi", { method: "POST", body: formData });
    
    if (!res.ok) {
      const errorData = await res.json().catch(() => ({ error: `HTTP ${res.status}: ${res.statusText}` }));
      document.getElementById("status").innerHTML = '<div class="error-message">‚ùå ' + (errorData.error || `Server error: ${res.status}`) + '</div>';
      return;
    }
    
    const data = await res.json();
    
    if (data.error) {
      document.getElementById("status").innerHTML = '<div class="error-message">‚ùå ' + data.error + '</div>';
    } else if (data.message) {
      document.getElementById("status").innerHTML = '<div class="success-message">‚úÖ ' + data.message + '</div>';
      document.getElementById("actions").style.display = "flex";
    } else {
      document.getElementById("status").innerHTML = '<div class="error-message">‚ùå Unexpected response format</div>';
    }
  } catch (error) {
    document.getElementById("status").innerHTML = '<div class="error-message">‚ùå Error: ' + error.message + '</div>';
  }
});

document.getElementById("jdUploadForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const file = document.getElementById("jdFile").files[0];
  if (!file) {
    document.getElementById("status").innerHTML += '<div class="error-message">Please select a job description file</div>';
    return;
  }
  
  const formData = new FormData();
  formData.append("file", file);
  formData.append("file_id", "jd");
  
  const currentStatus = document.getElementById("status").innerHTML;
  document.getElementById("status").innerHTML = currentStatus + '<div class="loading">‚è≥ Uploading job description...</div>';
  
  try {
    const res = await fetch("/api/upload-multi", { method: "POST", body: formData });
    
    if (!res.ok) {
      const errorData = await res.json().catch(() => ({ error: `HTTP ${res.status}: ${res.statusText}` }));
      document.getElementById("status").innerHTML += '<div class="error-message">‚ùå ' + (errorData.error || `Server error: ${res.status}`) + '</div>';
      return;
    }
    
    const data = await res.json();
    
    if (data.error) {
      document.getElementById("status").innerHTML += '<div class="error-message">‚ùå ' + data.error + '</div>';
    } else if (data.message) {
      document.getElementById("status").innerHTML += '<div class="success-message">‚úÖ ' + data.message + '</div>';
    } else {
      document.getElementById("status").innerHTML += '<div class="error-message">‚ùå Unexpected response format</div>';
    }
  } catch (error) {
    document.getElementById("status").innerHTML += '<div class="error-message">‚ùå Error: ' + error.message + '</div>';
  }
});

async function getATSScore() {
  document.getElementById("results").innerHTML = '<div class="loading">‚è≥ Calculating ATS score...</div>';
  try {
    const res = await fetch("/api/resume/ats-score", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({})
    });
    
    if (!res.ok) {
      const errorData = await res.json().catch(() => ({ error: `HTTP ${res.status}: ${res.statusText}` }));
      document.getElementById("results").innerHTML = '<div class="error-message">‚ùå ' + (errorData.error || `Server error: ${res.status}`) + '</div>';
      return;
    }
    
    const data = await res.json();
    displayResults(data);
    document.getElementById("results").scrollIntoView({ behavior: 'smooth' });
  } catch (error) {
    document.getElementById("results").innerHTML = '<div class="error-message">‚ùå Error: ' + error.message + '</div>';
  }
}

async function matchWithJD() {
  document.getElementById("results").innerHTML = '<div class="loading">‚è≥ Matching with job description...</div>';
  try {
    const res = await fetch("/api/resume/match-jd", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ jd_file_id: "jd" })
    });
    
    if (!res.ok) {
      const errorData = await res.json().catch(() => ({ error: `HTTP ${res.status}: ${res.statusText}` }));
      document.getElementById("results").innerHTML = '<div class="error-message">‚ùå ' + (errorData.error || `Server error: ${res.status}`) + '</div>';
      return;
    }
    
    const data = await res.json();
    displayResults(data);
    document.getElementById("results").scrollIntoView({ behavior: 'smooth' });
  } catch (error) {
    document.getElementById("results").innerHTML = '<div class="error-message">‚ùå Error: ' + error.message + '</div>';
  }
}

async function getFullReport() {
  document.getElementById("results").innerHTML = '<div class="loading">‚è≥ Generating full report...</div>';
  try {
    const res = await fetch("/api/resume/full-report", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ jd_file_id: "jd" })
    });
    
    if (!res.ok) {
      const errorData = await res.json().catch(() => ({ error: `HTTP ${res.status}: ${res.statusText}` }));
      document.getElementById("results").innerHTML = '<div class="error-message">‚ùå ' + (errorData.error || `Server error: ${res.status}`) + '</div>';
      return;
    }
    
    const data = await res.json();
    displayResults(data);
    document.getElementById("results").scrollIntoView({ behavior: 'smooth' });
  } catch (error) {
    document.getElementById("results").innerHTML = '<div class="error-message">‚ùå Error: ' + error.message + '</div>';
  }
}

async function rewriteResume() {
  document.getElementById("results").innerHTML = '<div class="loading">‚è≥ Rewriting resume...</div>';
  try {
    const res = await fetch("/api/resume/rewrite", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ improvements: [] })
    });
    
    if (!res.ok) {
      const errorData = await res.json().catch(() => ({ error: `HTTP ${res.status}: ${res.statusText}` }));
      document.getElementById("results").innerHTML = '<div class="error-message">‚ùå ' + (errorData.error || `Server error: ${res.status}`) + '</div>';
      return;
    }
    
    const data = await res.json();
    displayResults(data);
    document.getElementById("results").scrollIntoView({ behavior: 'smooth' });
  } catch (error) {
    document.getElementById("results").innerHTML = '<div class="error-message">‚ùå Error: ' + error.message + '</div>';
  }
}

function displayResults(data) {
  const container = document.getElementById("results");
  
  if (data.error) {
    container.innerHTML = '<div class="error-message">‚ùå ' + data.error + '</div>';
    return;
  }
  
  let html = '<div class="result-card fade-in"><h3 class="result-header">üìÑ Resume Analysis Results</h3>';
  
  // Display ATS Score (multiple possible formats)
  const atsScore = data.atsScore || data.overallScore || (data.atsScore && data.atsScore.overallScore);
  if (atsScore !== undefined) {
    const score = typeof atsScore === 'object' ? atsScore.overallScore || atsScore.score : atsScore;
    const scoreColor = score >= 80 ? '#28a745' : score >= 60 ? '#ffc107' : '#dc3545';
    html += `<div class="result-section ats-score-card"><h4>üìä ATS Score:</h4><p class="ats-score-display" style="font-size: 2.5rem; font-weight: bold; color: ${scoreColor};">${score}/100</p></div>`;
  }
  
  // Display breakdown if available
  const breakdown = data.breakdown || data.atsScore?.breakdown || {};
  if (Object.keys(breakdown).length > 0) {
    html += '<div class="result-section breakdown-card"><h4>üìã Score Breakdown:</h4><ul>';
    for (const [key, value] of Object.entries(breakdown)) {
      html += `<li><strong>${key}:</strong> ${value}</li>`;
    }
    html += '</ul></div>';
  }
  
  // Display strengths if available
  const strengths = data.strengths || data.atsScore?.strengths || [];
  if (strengths.length > 0) {
    html += '<div class="result-section suggestion-card"><h4>‚úÖ Strengths:</h4><ul>';
    strengths.forEach(str => html += '<li>' + str + '</li>');
    html += '</ul></div>';
  }
  
  // Display weaknesses if available
  const weaknesses = data.weaknesses || data.atsScore?.weaknesses || [];
  if (weaknesses.length > 0) {
    html += '<div class="result-section error-card"><h4>‚ö†Ô∏è Areas for Improvement:</h4><ul>';
    weaknesses.forEach(weak => html += '<li>' + weak + '</li>');
    html += '</ul></div>';
  }
  
  // Display match analysis if available
  if (data.matchAnalysis || data.matchScore || data.matchDetails) {
    const matchScore = data.matchScore || data.matchPercentage;
    const matchColor = matchScore >= 80 ? '#28a745' : matchScore >= 60 ? '#ffc107' : '#dc3545';
    html += '<div class="result-section match-card"><h4>üéØ JD Match Analysis:</h4>';
    if (matchScore !== undefined) {
      html += `<p class="match-score" style="font-size: 1.5rem; font-weight: bold; color: ${matchColor};">Match Score: ${matchScore}%</p>`;
    }
    if (data.matchAnalysis) {
      html += '<p>' + data.matchAnalysis + '</p>';
    }
    if (data.matchDetails) {
      html += '<p>' + data.matchDetails + '</p>';
    }
    html += '</div>';
  }
  
  // Display skill gaps if available
  if (data.skillGaps && data.skillGaps.length > 0) {
    html += '<div class="result-section warning-card"><h4>üìö Skill Gaps:</h4><ul>';
    data.skillGaps.forEach(gap => html += '<li>' + gap + '</li>');
    html += '</ul></div>';
  }
  
  // Display improvements if available
  if (data.improvements && data.improvements.length > 0) {
    html += '<div class="result-section suggestion-card"><h4>üí° Suggested Improvements:</h4><ul>';
    data.improvements.forEach(improvement => {
      if (typeof improvement === 'string') {
        html += '<li>' + improvement + '</li>';
      } else if (improvement.suggestion) {
        html += '<li><strong>' + improvement.category + ':</strong> ' + improvement.suggestion + '</li>';
      } else if (improvement.title) {
        html += '<li><strong>' + improvement.title + ':</strong> ' + (improvement.description || '') + '</li>';
      } else {
        html += '<li>' + JSON.stringify(improvement) + '</li>';
      }
    });
    html += '</ul></div>';
  }
  
  // Display rewritten resume if available
  if (data.rewrittenResume) {
    html += '<div class="result-section rewritten-card"><h4>‚úçÔ∏è Rewritten Resume:</h4><div class="rewritten-content-wrapper"><div class="rewritten-content">' + escapeHtml(data.rewrittenResume).replace(/\n/g, '<br>') + '</div></div><button onclick="copyRewrittenResume()" class="copy-rewritten-btn">üìã Copy Rewritten Resume</button></div>';
  }
  
  // Display keywords if available
  if (data.keywords && data.keywords.length > 0) {
    html += '<div class="result-section keywords-card"><h4>üîë Key Keywords Found:</h4><div class="keywords-list">';
    data.keywords.forEach(kw => html += '<span class="keyword-tag">' + kw + '</span>');
    html += '</div></div>';
  }
  
  // Display summary if available
  if (data.summary) {
    html += '<div class="result-section summary-card"><h4>üìù Summary:</h4><p>' + data.summary + '</p></div>';
  }
  
  html += '<details class="result-section"><summary>View Full JSON</summary><pre class="result-json">' + JSON.stringify(data, null, 2) + '</pre></details>';
  html += '<button onclick="copyResult()" class="copy-btn">üìã Copy Result</button></div>';
  
  container.innerHTML = html;
}

function shareResult() {
  const shareUrl = window.location.href;
  if (navigator.share) {
    navigator.share({ title: "Resume Analysis", url: shareUrl });
  } else {
    navigator.clipboard.writeText(shareUrl);
    alert("Link copied to clipboard!");
  }
}

function copyResult() {
  const results = document.querySelectorAll('.result-card pre');
  if (results.length > 0) {
    navigator.clipboard.writeText(results[0].innerText);
    alert("Results copied to clipboard!");
  }
}

function copyRewrittenResume() {
  const rewrittenContent = document.querySelector('.rewritten-content');
  if (rewrittenContent) {
    const text = rewrittenContent.innerText || rewrittenContent.textContent;
    navigator.clipboard.writeText(text);
    alert("Rewritten resume copied to clipboard!");
  }
}

function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}
</script>

<style>
/* Resume Analyzer specific styles */
.ats-score-card {
  background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
  border-left: 4px solid #4CAF50;
  text-align: center;
}

.ats-score-display {
  margin: 1rem 0;
}

.breakdown-card {
  background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
  border-left: 4px solid #2196F3;
}

.match-card {
  background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
  border-left: 4px solid #FF9800;
}

.match-score {
  margin: 1rem 0;
}

.rewritten-card {
  background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%);
  border-left: 4px solid #9C27B0;
}

.rewritten-content-wrapper {
  max-height: 600px;
  overflow-y: auto;
  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
  padding: 2rem;
  border-radius: 12px;
  border: 2px solid rgba(102, 126, 234, 0.1);
  box-shadow: var(--shadow-md);
  margin: 1rem 0;
}

.rewritten-content {
  font-family: 'Inter', 'Poppins', sans-serif;
  font-size: 0.95rem;
  line-height: 1.8;
  color: var(--color-text);
  white-space: pre-wrap;
  word-wrap: break-word;
}

.copy-rewritten-btn {
  margin-top: 1rem;
  padding: 0.75rem 1.5rem;
  background: var(--gradient-primary);
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: var(--shadow-sm);
}

.copy-rewritten-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.keywords-card {
  background: linear-gradient(135deg, #E0F2F1 0%, #B2DFDB 100%);
  border-left: 4px solid #009688;
}

.keywords-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 1rem;
}

.keyword-tag {
  display: inline-block;
  padding: 0.5rem 1rem;
  background: white;
  border: 1px solid #009688;
  border-radius: 20px;
  font-size: 0.9rem;
  color: #009688;
  font-weight: 500;
}

.summary-card {
  background: linear-gradient(135deg, #E8EAF6 0%, #C5CAE9 100%);
  border-left: 4px solid #3F51B5;
}
</style>
{% endblock %}







